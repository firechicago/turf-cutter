<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Show drawn polygon area</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
  <script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-pip/v0.0.2/leaflet-pip.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
  <style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
</head>
<body>

  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.css' rel='stylesheet' />
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.js'></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-geodesy/v0.1.0/leaflet-geodesy.js'></script>

  <div id='map'></div>

  <script>
  L.mapbox.accessToken = 'pk.eyJ1IjoiY2hyaXN3YW5kIiwiYSI6Ii15YVZETmcifQ.iwFzK-RnFcNDU_msz06eQQ';
  var map = L.mapbox.map('map', 'chriswand.kdm86mf3')
  .setView([38.91338, -77.03236], 16);

  var featureGroup = L.featureGroup().addTo(map);

  var drawControl = new L.Control.Draw({
    edit: {
      featureGroup: featureGroup
    },
    draw: {
      polygon: true,
      polyline: false,
      rectangle: false,
      circle: false,
      marker: false
    }
  }).addTo(map);

  var marker = {
    // this feature is in the GeoJSON format: see geojson.org
    // for the full specification
    type: 'Feature',
    geometry: {
      type: 'Point',
      // coordinates here are in longitude, latitude order because
      // x, y is the standard for GeoJSON and many formats
      coordinates: [
      -77.03221142292,
      38.913371603574
      ]
    },
    properties: {
      title: 'Peregrine Espresso',
      description: '1718 14th St NW, Washington, DC',
      // one can customize markers by adding simplestyle properties
      // https://www.mapbox.com/guides/an-open-platform/#simplestyle
      'marker-size': 'large',
      'marker-color': '#BE9A6B',
      'marker-symbol': 'cafe'
    }
  }

  L.mapbox.featureLayer(marker).addTo(map);

  map.on('draw:created', showPolygonArea);

  function showPolygonArea(e) {
    var new_layer = map.addLayer(e.layer);
    debugger;
    alert(leafletPip.pointInLayer(marker.geometry.coordinates, new_layer));
  }
</script>

</body>
</html>
